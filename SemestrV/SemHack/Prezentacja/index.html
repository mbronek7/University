<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />

  <title>BezpieczeÅ„stwo WWW</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML" />
  <meta name="author" content="Hakim El Hattab" />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="stylesheet" href="css/reveal.css" />
  <link rel="stylesheet" href="css/theme/moon.css" id="theme" />

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/zenburn.css" />

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement("link");
    link.rel = "stylesheet";
    link.type = "text/css";
    link.href = window.location.search.match(/print-pdf/gi) ?
      "css/print/pdf.css" :
      "css/print/paper.css";
    document.getElementsByTagName("head")[0].appendChild(link);
  </script>

  <!--[if lt IE 9]> <script src="lib/js/html5shiv.js"></script> <![endif]-->
</head>

<body>
  <div class="reveal">
    <!--
        Any section element inside of this container is displayed as a slide
      -->
    <div class="slides">
      <section>
        <h1>BezpieczeÅ„stwo</h1>
        <h3>aplikacji WWW</h3>
      </section>

      <section>
        <section>
          <h2>O czym jest ta prezentacja?</h2>
          <p class="fragment">BÄ™dzie lekko chaotyczna ðŸ˜‰</p>
          <aside class="notes">
            W sumie to juÅ¼ sam nie wiem :P
            Ale wiem, Å¼e bÄ™dzie < KLIK>
          </aside>
        </section>
        <section>
          <h2>Porozmawiamy o</h2>
          <p class="fragment grow highlight-green">Metodach zabezpieczeÅ„ (te ktÃ³re znam)</p>
          <p class="fragment grow highlight-green">Popularne luki w zabezpieczeniach</p>
          <p class="fragment grow highlight-green">Analiza zdarzeÅ„ zwiÄ…zanych z bezpieczeÅ„stwem</p>
          <aside class="notes">
            Analiza - "powÅ‚amaniowa"
          </aside>
        </section>
      </section>
      </section>
      <section>
        <section>
          <h2>XSS</h2>
          <p class="fragment">Cross-Site Scripting</p>
          <aside class="notes">
            - najpopularniejsza luka w bezpieczeÅ„stwie aplikacji web
          </aside>
        </section>
        <section>
          <p class="fragment">1. Obity XSS</p>
          <p class="fragment">2. Zapisany XSS</p>
          <aside class="notes">
            odbity- apka przyjmuje parametry na wejÅ›Ä‡iu i odzwierciedla je na wygenerowanej stronie WWW
            zapisany - zapisujemy dane wejÅ›ciowe do bazy, a nastÄ™pnie jak siÄ™ zapisze to pokaÅ¼e siÄ™ kaÅ¼dej osobie!
          </aside>
        </section>
        <section>
          Jak sprawdziÄ‡ czy strona jest podatna na XSS?
          <p class="fragment">{}[];()<>'"</p>
          <aside class="notes">
            Sprawdzamy czy te znaki znajdÄ… siÄ™ na stronie w niezmienionej formie
          </aside>
        </section>
        <section>
          <pre class="fragment"><code class="js" data-trim contenteditable>
           <a href="javascript:alert("BUU")>Show</a>
          </code></pre>
          <aside class="notes">
            Odbity NajÅ‚atwiej popdmieniÄ‡ wartoÅ›Ä‡ w hrefie na kod JS
          </aside>
        </section>
        <section>
          <pre class="fragment"><code class="js" data-trim contenteditable>
            https://www.example.com/users/sth?next_page=/adres_www
          </code></pre>
          <pre class="fragment"><code class="js" data-trim contenteditable>
              https://www.example.com/users/sth?next_page=javascript:alert("BUU")
            </code></pre>
          <aside class="notes">
            No fajnie ale jak podmieniÄ‡ tÄ… wartoÅ›Ä‡, dla kogoÅ› innego niÅ¼ my :P
            Co moÅ¼emy - zabraÄ‡ wszystkie pliki cookie, a pomyÅ›lmy Å¼e admin wchodzi na naszÄ… stronÄ™
          </aside>
        </section>
        <section>
          <h2>Podstawowe zabezpieczenie - Filtrowanie</h2>
        </section>
        <section>
          <p class="fragment">HTML Eecaping</p>
          <pre class="fragment"><code class="rb" data-trim contenteditable>
              { '&' => '&amp;', '>' => '&gt;', '<' => '&lt;', '"' => '&quot;', "'" => '&#39;' }
            </code></pre>
          <aside class="notes">
            DomyÅ›lnie w wiÄ™kszoÅ›ci frameworkÃ³w itp.
          </aside>
        </section>
        <section>
          <p class="fragment">Gdzie mogÅ‚y zostaÄ‡ luki?</p>
          <pre class="fragment"><code class="js" data-trim contenteditable>
              [BUU](javascript:alert("BU"))
            </code></pre>
          <aside class="notes">
            Ok fajnie mamy wszÄ™dzie filtrowanie itp, czy jesteÅ›my bezpieczni?
          </aside>
        </section>
        <section>
          <p class="fragment">API</p>
          <aside class="notes">
            Mamy na stronie niskopopziomowe API, przyklÅ‚Ä…d slack i wysyÅ‚Ä…nie wiadommoÅ›Ä‡i, i id uÅ¼ytkownika nawet
          </aside>
        </section>
        <section>
          <h2 class="fragment">Cookie</h2>
          <p class="fragment">HTTPOnly</p>
          <aside class="notes">
            Raz jeszcze o cookie jest HTTPOnly, klient nie moÅ¼e takich cookie odczytaÄ‡ przez document.cookie, pomijajÄ…c
            szyfrowwanie
          </aside>
        </section>
        <section>
          <h2 class="fragment">Z jakich narzÄ™dzi korzystajÄ… atakujÄ…cy</h2>
          <img class="fragment" data-src="img/1.jpg">
        </section>
        <section>
          <h2 class="fragment">The Browser Exploitation Framework</h2>
          <aside class="notes">
            Uruchamiamy na naszym serwerze i wysyÅ‚amy jako XSS ofiarze
            skrypt do poÅ‚aÄ‡zenia
          </aside>
        </section>
        <section>
          <p class="fragment">Logi z caÅ‚ej przeglÄ…darki</p>
          <p class="fragment">Lokalizacja, skrypty,dodatki w przeglÄ…darce, cookie</p>
          <p class="fragment">Komendy i polecenia, ktÃ³re moÅ¼emy wysyÅ‚Ä‡ do przeglÄ…darki ofiary</p>
          <img class="fragment" data-src="img/2.jpg">

          <aside class="notes">
            Mamy dostÄ™p do:
            MoÅ¼emy wysyÅ‚Ä…Ä‡ Å¼Ä…dania do rÃ³Å¼nych witryn z przeglÄ…darki ofiary np:
            Jest zalogowany na fb, niech siÄ™ poÅ‚Ä…czy z naszÄ… aplikacjÄ…
          </aside>
        </section>
      </section>
      <section>
        <section>
          <h2>CSRF</h2>
          <p class="fragment">Cross-Site Request Forgery</p>
          <aside class="notes">
            Oszukujemy sewrwer, Å¼e na przeglÄ…darce uÅ¼ytkownik jest zalogowany
          </aside>
        </section>
        <section>
          <p class="fragment">InteresujÄ… nas gÅ‚Ã³wnie akcjÄ™ POST i GET</p>
          <pre class="fragment"><code class="js" data-trim contenteditable>
            https://zapisy.com/user/save/class?username=Michal&second_name=Bronikowski&token=13QWEFVQV231WV123
          </code></pre>
          <aside class="notes">
            Ok, ale wiÄ™szoÅ›Ä‡ aplikacji ma token zabezpieczajÄ…cy :P
            A nawet wiÄ™cej tokeny w nagÅ‚Ã³wkach Å¼adania, token w Origin itp
            SEO - Boty Googla dasz im nagÅ‚Ã³wek - znasz IP
          </aside>
        </section>
        <section>
          <h2>Popularne bÅ‚Ä™dy</h2>
          <p class="fragment">"Losowy" token zÅ‚oÅ¼ony z cyfr od 1 do 100</p>
          <p class="fragment">Jeden i ten sam token dla wszystkich uÅ¼ytkownikÃ³w</p>
          <p class="fragment">Dowalna losowa wartoÅ›c tokena zostanie zaakceptowana przez serwer</p>
          <p class="fragment">Token "atrapa"</p>
        </section>
        <section>
          <h2>XMLHttpRequest</h2>
          <aside class="notes">
            Å»eby nie byÅ‚o tak rÃ³Å¼Ã³wo
          </aside>
        </section>
        <section>
          <p class="fragment">X-Requested-With</p>
          <aside class="notes">
            Dodatkowy nagÅ‚Ã³wek, ktÃ³rego nie da siÄ™ podaÄ‡ z poziomu formularza
          </aside>
        </section>
        <section>
          <h2 class="fragment">FLASH</h2>
          <aside class="notes">
            ALE zawsze jest coÅ› co nam popsuje naszÄ… utopiÄ™.
          </aside>
        </section>
        <section>
          <p class="fragment">Mamy akcjÄ™ POST</p>
          <p class="fragment">Tworzymy plik SWF, ktÃ³ry wysyÅ‚a Å¼Ä…danie na nasz serwer</p>
          <p class="fragment">Nasz serwer odpowiada 307</p>
          <aside class="notes">
            2. OczywiÅ›cie nagÅ‚Ã³wek mamy ustawiony, z tej strony
            3. 307 - Temporary Redirect na ofiarÄ™
          </aside>
        </section>
      </section>
      <section>
        <section>
          <h2 class="fragment">SQL Injection</h2>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
              User.delete_all("id = #{params[:id]}")
            </code></pre>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                params[:id] = "1) OR 1=1"
              </code></pre>
              <pre class="fragment"><code class="rb" data-trim contenteditable>
                  DELETE FROM "users" WHERE (id = 1) OR 1=1)
                </code></pre>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                User.where(:admin => false).group(params[:group])
            </code></pre>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                params[:group] = "name UNION SELECT * FROM users"
            </code></pre>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                SELECT "users".* FROM "users" WHERE "users"."admin" = ? GROUP BY name UNION SELECT * FROM users
            </code></pre>
            <aside class="notes">
                Jak moÅ¼na takie coÅ› zepsuÄ‡? Suma zbiorÃ³w - UNION
            </aside>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                Guest.where("event_id = #{params[:id]}")
            </code></pre>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                Guest.where(event_id: params[:id])
            </code></pre>
            <aside class="notes">
                Co robimy w Railsowym ORMIE?
                1 - zle czysta interpolacja
            </aside>
        </section>
        <section>
            <p class="fragment">ChcÄ™ metodÄ™ dostÄ™pnÄ… w konkretnym systemie zarzÄ…dzania bazami SQL</p>
            <aside class="notes">
                Co jeÅ›li i ORM mi tego nie obsÅ‚uguje?
            </aside>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                class PostWithPopularityQuery
                POPULARITY_RANGES = 5

                  def self.call
                    Post.find_by_sql ['
                      SELECT
                        id, title, visit_count, description,
                      ntile(?) OVER (
                        ORDER BY visit_count ASC
                      ) AS popularity
                      FROM posts', POPULARITY_RANGES]
                  end
                end
            </code></pre>
            <aside class="notes">
                ntile - POSTGRESQL - Window Functions
            </aside>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                conn = ActiveRecord::Base.connection
                name = conn.quote("MichaÅ‚ Bronikowski")
                title = conn.quote(nil)
                query = "INSERT INTO users (name,title) VALUES (#{name}, #{title})"
                conn.execute(query)
            </code></pre>
            <aside class="notes">
                RAILS - quote function
            </aside>
        </section>
        <section>
        <pre class="fragment"><code class="rb" data-trim contenteditable>
            rails c                                                                                                                                                                                                       î‚² 0.10 ï‰’ î‚² 21:27 ï€—  î‚² 4.67G ïƒ¤
            Running via Spring preloader in process 18504
            Loading development environment (Rails 5.2.1)
            a = "name UNION SELECT * FROM users"
             => "name UNION SELECT * FROM users"
            2.5.1 :005 > ActiveRecord::Base.connection.quote(a)
             => "'name UNION SELECT * FROM users'"
        </code></pre>
        </section>
        <section>
            <img class="fragment" data-src="img/3.png">
        </section>
        <section>
            <img class="fragment" data-src="img/4.jpeg">
            <aside class="notes">
                Tak po za tym, ale to pÃ³Å¼niej
            </aside>
        </section>
      </section>
      <section>
        <section>
          <p class="fragment">NarzÄ™dzia przydatne przy analizie bÅ‚Ä™dÃ³w bezpieczeÅ„stwa aplikacji</p>
          <aside class="notes">
              Te z ktÃ³rych ja korzystam i ktÃ³re ja znam
          </aside>
        </section>
        <section>
            <img class="fragment" data-src="img/5.png">
        </section>
        <section>
            <img class="fragment" data-src="img/6.png">
        </section>
        <section>
            <h2 class="fragment">Rack::Attack</h2>
            <aside class="notes">
                Kickstarter
            </aside>
        </section>
        <section>
            <h2 class="fragment">bundler-audit</h2>
            <img class="fragment" data-src="img/7.png">
        </section>
        <section>
            <img class="fragment" data-src="img/8.png">
        </section>
        <section>
            <h2 class="fragment">Po co miaÅ‚bym to od razu aktualizowaÄ‡?</h2>
        </section>
        <section>
            <h2 class="fragment">Shodan</h2>
        </section>
      </section>
      <section>
        <section>
          <h2 class="fragment">Jak zabezpieczyÄ‡ dane klientÃ³w</h2>
          <aside class="notes">
              Phishing itp.
          </aside>
        </section>
        <section>
            <pre class="fragment"><code class="rb" data-trim contenteditable>
                class ApplicationController < ActionController::Base

                before_action :set_cache_headers
                
                  private
                
                  def set_cache_headers
                    response.headers["Cache-Control"] = "no-cache, no-store"
                    response.headers["Pragma"] = "no-cache"
                    response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
                  end
                end
            </code></pre>
        </section>

      </section>
      <section>
        <h2>Zalety</h2>
        <p class="fragment grow highlight-green">Wczesne wykrycie bÅ‚Ä™dÃ³w</p>
        <p class="fragment grow highlight-green">
          Wiemy, Å¼e wersja produkcyjna na pewno dziaÅ‚a
        </p>
        <p class="fragment grow highlight-green">
          Testy sÄ… czÄ™Å›ciÄ… dokumentacji naszego projektu
        </p>
        <aside class="notes">
          DziÄ™ki testom zobaczymy jak dana klasa dziaÅ‚a, co zwraca; jak
          dziaÅ‚a system; jakie funkcjonalnoÅ›ci byÅ‚y zaimplementowane. Taka
          dokumentacja jest niezmiernie przydatna, gdy wrÃ³cimy do projektu
          po paru miesiÄ…cach.(A "prawdziwa dokumentacja niezostaÅ‚a jeszce
          napisana")
        </aside>
      </section>
      </section>

      <section>
        <section>
          <h2>TDD?</h2>
          <p>Test-Driven-Development</p>
        </section>
        <section>
          <p>W skrÃ³cie proces tworzenia aplikacji zorientowany testowo.</p>
        </section>
        <section>
          <p>Co to wÅ‚aÅ›ciwie znaczy?</p>
          <p class="fragment fade-up">
            Zobaczmy na przykÅ‚adzie dodawania nowej funkcjonalnoÅ›Ä‡i
          </p>
        </section>
        <section data-background="#ff0000">
          <p style="color: #fff">
            Piszemy testy, ktÃ³re tÄ™ funkcjonalnoÅ›Ä‡ sprawdzajÄ…
          </p>
          <aside class="notes">
            OczywiÅ›cie wszystkie testy koÅ„czÄ… siÄ™ poraÅ¼ka -- brak
            zaimplementowanej funkcjonalnoÅ›ci
          </aside>
        </section>
        <section data-background="#00ff50">
          <p style="color: #fff">
            Piszemy kod, ktÃ³ry ma speÅ‚niaÄ‡ nowÄ… funkcjonalnoÅ›Ä‡
          </p>
          <aside class="notes">Kod nie musi byÄ‡ optymalny</aside>
        </section>
        <section data-background="#02adf7">
          <p style="color: #fff">Refaktoryzacja</p>
          <aside class="notes">
            Proces wprowadzania otymalizacji w naszym kodzie
          </aside>
        </section>
      </section>

      <section>
        <section>
          <h2>BDD?</h2>
          <p>Behaviour-Driven-Development</p>
        </section>
        <section>
          Tworzenie oprogramowania na podstawie scenariuszy z perspektywy
          klienta
        </section>
        <section>
          <p>W skrÃ³cie klient opisuje nam jak ma dziaÅ‚aÄ‡ aplikacja.</p>
          <p class="fragment">
            Deweloper "zadaje" pytania aplikacji i sprawdza odpowiedÅº
          </p>
        </section>
        <section>
          <p>KaÅ¼dy scenariusz skÅ‚ada siÄ™ z kilku czÄ™Å›ci:</p>
          <p class="fragment">â€“ tytuÅ‚u</p>
          <p class="fragment">â€“ narracji</p>
          <p class="fragment">â€“ kryteriÃ³w akceptacji</p>
        </section>
        <section>
          <p>Wiem dziwnie to brzmi, zobaczmy wiÄ™c przykÅ‚ad:</p>

          <pre class="fragment"><code class="hlruby" data-trim contenteditable>
                                                        RSpec.feature "Post creation", :type => :feature do
                                                        scenario "User creates a new post" do
                                                          visit "/widgets/new"

                                                          fill_in "Title", :with => "My Post"
                                                          fill_in "Body", :with => "Lorem Ipsum dorum ..."
                                                          click_button "Create Post"

                                                          expect(page).to have_text("Post was successfully created.")
                                                        end
                                                  end		
                        </code></pre>
        </section>
        <section>
          <p>Filozofia:</p>
          <p class="fragment">"ask, don't tell"</p>
        </section>
        <section>
          <p>Schemat pracy jest podobny jak w TDD</p>
        </section>
      </section>
      <section>
        <section>
          <h2>RÃ³Å¼nice</h2>
        </section>
        <section>
          <p>
            Testy BDD pisane sÄ… z myslÄ… o uÅ¼ytkowniku koÅ„cowym, pomagaja
            programistom lepiej zrozumieÄ‡ oczekiwania "biznesu", nie tylko
            przetestowaÄ‡ aplikacjÄ™.
          </p>
        </section>
        <section>
          <p>
            BDD sprawdza czy czynnoÅ›Ä‡ zostaÅ‚a wykonana, nie sprawdza w
            przeciwieÅ„stwie do TDD poprawnoÅ›ci algorytmu.
          </p>
        </section>
        <section>
          <iframe src="https://giphy.com/embed/5mQLalaELSytO" width="335" height="480" frameborder="0" class="giphy-embed"
            allowfullscreen></iframe>
          <p>
            <a href="https://giphy.com/gifs/perfect-loops-sucks-5mQLalaELSytO"></a>
          </p>
          <aside class="notes">
            TDD sprawdza i wynik i proces jego otrzymania.
          </aside>
        </section>
        <section>
          <p>
            DziÄ™ki BDD analizujemy, planujemy i projektujemy tyle, ile
            naprawdÄ™ trzeba.
          </p>
        </section>
      </section>
      <section>
        <h2 class="fragment">Najpierw piszemy testy, potem kod ðŸ˜±</h2>
      </section>
      <section>
        <section>
          <h2>Jakie testy pisaÄ‡?</h2>
        </section>
        <section>
          <p class="fragment">Jednostkowe</p>
          <p class="fragment">Funkcjonalne/Akceptacyjne</p>
          <p class="fragment">PrzeglÄ…darkowe</p>
          <p class="fragment">WydajnoÅ›ciowe</p>
          <aside class="notes">
            ***Jednostkowe (ang. Unit tests) â€“ testujÄ… kod poprzez wykonywanie
            testÃ³w weryfikujÄ…cych poprawnoÅ›Ä‡ dziaÅ‚ania
            obiektÃ³w/moduÅ‚Ã³w/systemÃ³w ***Funkcjonalne/akceptacyjne (ang.
            Functional tests) â€“ sprawdzajÄ…ce czy system dziaÅ‚a poprawnie na
            zasadzie czarnej skrzynki (ang. black-box) -testy czarnej
            skrzynki, poniewaÅ¼ osoba testujÄ…ca nie ma dostÄ™pu do informacji na
            temat budowy programu, ktÃ³ry testuje. ***PrzeglÄ…darkowe - testujÄ…
            zachowanie systemu poprzez odpalenie go w przeglÄ…darce i testy na
            prawdziwej stronie ***WydajnoÅ›ciowe - testujÄ…ce wydajnoÅ›Ä‡ systemu
            przy duÅ¼ych obciÄ…Å¼eniach
          </aside>
        </section>
      </section>
      <section>
        <h2>Czas na maÅ‚y przykÅ‚ad ðŸ˜‰</h2>
      </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>

  <script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: "slide", // none/fade/slide/convex/concave/zoom

      // More info https://github.com/hakimel/reveal.js#dependencies
      dependencies: [{
          src: "lib/js/classList.js",
          condition: function () {
            return !document.body.classList;
          }
        },
        {
          src: "plugin/markdown/marked.js",
          condition: function () {
            return !!document.querySelector("[data-markdown]");
          }
        },
        {
          src: "plugin/markdown/markdown.js",
          condition: function () {
            return !!document.querySelector("[data-markdown]");
          }
        },
        {
          src: "plugin/highlight/highlight.js",
          async: true,
          callback: function () {
            hljs.initHighlightingOnLoad();
          }
        },
        {
          src: "plugin/search/search.js",
          async: true
        },
        {
          src: "plugin/zoom-js/zoom.js",
          async: true
        },
        {
          src: "plugin/notes/notes.js",
          async: true
        }
      ]
    });
  </script>
</body>

</html>